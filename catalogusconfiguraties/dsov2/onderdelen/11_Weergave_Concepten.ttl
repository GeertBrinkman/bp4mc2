#
# PAGINA'S (REPRESENTATIONS)
#

# Weergavepagina inclusief versies en grafische weergave
stage:WeergavePaginaConcepten a elmo:Representation;
  # Bereikbaarheid
  elmo:uri-pattern "/id/concept/";
  elmo:applies-to [
		rdf:type skos:Concept
	];
  
  # Onderdelen
  elmo:contains stage:DSOv2Menu;
  
  # Data
	elmo:query stage:WeergaveTabelConceptenQuery;
.

# Query voor WeergaveTabel
stage:WeergaveTabelConceptenQuery a elmo:Query;
	elmo:query '''
		prefix skos: <http://www.w3.org/2004/02/skos/core#>
		prefix dct: <http://purl.org/dc/terms/>
		prefix thes: <http://purl.org/iso25964/skos-thes#>
		prefix prov: <http://www.w3.org/ns/prov#>
		prefix dc: <http://purl.org/dc/terms/>
		prefix skoslex: <http://bp4mc2.org/def/skos-lex/>
		prefix container: <http://localhost:8080/catalogus/dsov2/container/>
		prefix doc: <http://localhost:8080/catalogus/dsov2/concepten/doc/>
		prefix dataset: <http://localhost:8080/catalogus/dsov2/id/dataset/>
		prefix concept: <http://localhost:8080/catalogus/dsov2/id/concept/>
		prefix brt: <http://brt.basisregistraties.overheid.nl/id/dataset/>
		prefix bp4mc2: <http://bp4mc2.org/elmo/def/>
		prefix dcat: <http://www.w3.org/ns/dcat#>
		prefix tr: <http://localhost:8080/toepasbareregels/>
		
		construct {
      ?graph prov:generatedAtTime ?time.
			?graph ?p ?o.
		}
		where {
      GRAPH ?graph {
        ?graph prov:generatedAtTime ?time.
        <@IDSUBJECT@> ?p ?o.
        FILTER( ?p != rdfs:label )
      }
      FILTER regex( ?graph, "http://omgevingswet.overheid.nl/catalogus/id/transactie/" )
		}
	'''
.
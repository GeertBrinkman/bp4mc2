@prefix elmo: <http://bp4mc2.org/elmo/def#>.
@prefix html: <http://www.w3.org/1999/xhtml/vocab#>.
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.
@prefix dcterms: <http://purl.org/dc/terms/>.
@prefix void: <http://rdfs.org/ns/void#>.
@prefix geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>.
@prefix stage: <http://localhost:8080/modelleren/stage#>.

stage:ProfielProperties	a	elmo:Representation;
	elmo:url-pattern	"/query/profiel-properties$";
	elmo:contains	stage:Menu;
  elmo:query '''
    prefix containerlocal: <http://localhost:8080/modelleren/container/>
    select (strafter(str(?shape),"#") as ?class)
           (strafter(str(?prop),"_") as ?predicate)
           ?nllabel
           (if(?prefix="http://www.w3.org/2006/vcard/ns","vcard",
            if(?prefix="http://www.w3.org/ns/dcat","dcat",
            if(?prefix="http://purl.org/dc/terms","dct",
            "?"
            ))) as ?vocabular
           )
           (replace(str(?path),"^([^ ]+)(#|/)([^ ]+)$","$3") as ?propertyname)
    where {
      graph containerlocal:profiel {
        ?shape a sh:NodeShape.
        ?shape sh:property ?prop.
        ?prop sh:path ?path.
        ?prop rdfs:label ?nllabel
        BIND (replace(str(?path),"^([^ ]+)(#|/)([^#/]+)","$1") as ?prefix)
      }
    }
  '''
.
